
@{
    ViewBag.Title = "Drawing Circle with CALayer";
}

<h1>Drawing Circle with CALayer</h1>
<br />
<p>Below code snippet is used to draw a circle using CALayer and add animation.</p>
<pre><span style='color:#800000; font-weight:bold; '>var</span> radius <span style='color:#808030; '>=</span> <span style='color:#008c00; '>25</span><span style='color:#800080; '>;</span>
CAShapeLayer clayer <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> CAShapeLayer <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>Path <span style='color:#808030; '>=</span> UIBezierPath<span style='color:#808030; '>.</span>FromRoundedRect <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>new</span> CGRect <span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>0</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>50</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>50</span><span style='color:#808030; '>)</span><span style='color:#808030; '>,</span> radius<span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>CGPath<span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>Position <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> CGPoint <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>this</span><span style='color:#808030; '>.</span>View<span style='color:#808030; '>.</span>Bounds<span style='color:#808030; '>.</span>GetMidX <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>-</span> radius<span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>this</span><span style='color:#808030; '>.</span>View<span style='color:#808030; '>.</span>Bounds<span style='color:#808030; '>.</span>GetMidY <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>-</span> radius<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>FillColor <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>UIColor<span style='color:#808030; '>.</span>Clear<span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>CGColor<span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>StrokeColor <span style='color:#808030; '>=</span> <span style='color:#808030; '>(</span>UIColor<span style='color:#808030; '>.</span>Red<span style='color:#808030; '>)</span><span style='color:#808030; '>.</span>CGColor<span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>LineWidth <span style='color:#808030; '>=</span> 2f<span style='color:#800080; '>;</span>

<span style='color:#800000; font-weight:bold; '>this</span><span style='color:#808030; '>.</span>View<span style='color:#808030; '>.</span>Layer<span style='color:#808030; '>.</span>AddSublayer <span style='color:#808030; '>(</span>clayer<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

CABasicAnimation drawAnimation <span style='color:#808030; '>=</span> CABasicAnimation<span style='color:#808030; '>.</span>FromKeyPath <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>strokeEnd</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
drawAnimation<span style='color:#808030; '>.</span>Duration <span style='color:#808030; '>=</span> 5f<span style='color:#800080; '>;</span>
drawAnimation<span style='color:#808030; '>.</span>RepeatCount <span style='color:#808030; '>=</span> 0f<span style='color:#800080; '>;</span>
drawAnimation<span style='color:#808030; '>.</span>From <span style='color:#808030; '>=</span> NSNumber<span style='color:#808030; '>.</span>FromFloat <span style='color:#808030; '>(</span>0f<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
drawAnimation<span style='color:#808030; '>.</span>To <span style='color:#808030; '>=</span> NSNumber<span style='color:#808030; '>.</span>FromFloat <span style='color:#808030; '>(</span>60f<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
drawAnimation<span style='color:#808030; '>.</span>TimingFunction <span style='color:#808030; '>=</span> CAMediaTimingFunction<span style='color:#808030; '>.</span>FromName <span style='color:#808030; '>(</span>CAMediaTimingFunction<span style='color:#808030; '>.</span>EaseIn<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
clayer<span style='color:#808030; '>.</span>AddAnimation <span style='color:#808030; '>(</span>drawAnimation<span style='color:#808030; '>,</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>drawCircleAnimation</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
</pre>

