
@{
    ViewBag.Title = "Creating Custom View";
}

<h1>Creating Custom View in iOS Application</h1>
<br />
<p>There will be certain design requirement where we need have a seperate view to be displayed on the view controller.</p>
<p>This example shows how to create a custom view and display it on a controller.</p>
<ul>
    <li>Create a Empty iOS Solution.</li>
    <li>Add a View Contoller to the Solution.</li>
    <li>Create few files which are indicated in the below images.</li>
</ul>
<br />
<img src="../../Images/CustomView/CustomView_1.png" alt="" class="img-responsive" />
<br />
<br />
<img src="../../Images/CustomView/CustomView_2.png" alt="" class="img-responsive" />
<br />
<br />
<img src="../../Images/CustomView/CustomView_3.png" alt="" class="img-responsive" />
<br />
<br />
<img src="../../Images/CustomView/CustomView_4.png" alt="" class="img-responsive" />
<br />
<p>You can see three files created in the solution.</p>
<ul>
    <li>SampleView Class File</li>
    <li>SampleView designer File</li>
    <li>SampleView XIB File</li>
</ul>
<p>Drag and drop designer.cs file to the class file so that it indicates those two are grouped together as below.</p>
<br />
<img src="../../Images/CustomView/CustomView_5.png" alt="" class="img-responsive" />
<br />
<br />
<p>Open the SampleView.cs and Inherit the class from UIView.</p>
<p>Open the SampleView.designer.cs and specify Register attribute with the same name as class name. This indicates the compiler that it is a custom designer class. </p>
<pre>
<span style='color:#808030; '>[</span>Register <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>]</span>
<span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>class</span> SampleView
<span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>public</span> SampleView <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
    <span style='color:#800080; '>{</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
<p>Create a Nib object and Instantiate it.</p>
<pre>
<span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>static</span> <span style='color:#800000; font-weight:bold; '>readonly</span> UINib Nib <span style='color:#808030; '>=</span> UINib<span style='color:#808030; '>.</span>FromName <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> NSBundle<span style='color:#808030; '>.</span>MainBundle<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>static</span> <span style='color:#800000; font-weight:bold; '>readonly</span> NSString Key <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> NSString <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
</pre>
<pre>
<span style='color:#800000; font-weight:bold; '>public</span> partial <span style='color:#800000; font-weight:bold; '>class</span> SampleView <span style='color:#808030; '>:</span> UIView
<span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>static</span> <span style='color:#800000; font-weight:bold; '>readonly</span> UINib Nib <span style='color:#808030; '>=</span> UINib<span style='color:#808030; '>.</span>FromName <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> NSBundle<span style='color:#808030; '>.</span>MainBundle<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>static</span> <span style='color:#800000; font-weight:bold; '>readonly</span> NSString Key <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> NSString <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>

    <span style='color:#800000; font-weight:bold; '>public</span> SampleView <span style='color:#808030; '>(</span>IntPtr handle<span style='color:#808030; '>)</span> <span style='color:#808030; '>:</span> <span style='color:#800000; font-weight:bold; '>base</span> <span style='color:#808030; '>(</span>handle<span style='color:#808030; '>)</span>
    <span style='color:#800080; '>{</span>
    <span style='color:#800080; '>}</span>

    <span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>static</span> SampleView Create <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
    <span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>return</span> <span style='color:#808030; '>(</span>SampleView<span style='color:#808030; '>)</span>Nib<span style='color:#808030; '>.</span>Instantiate <span style='color:#808030; '>(</span><span style='color:#800000; font-weight:bold; '>null</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>null</span><span style='color:#808030; '>)</span> <span style='color:#808030; '>[</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>]</span><span style='color:#800080; '>;</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
<p>Build the solution. Open the .XIB file in XCode.</p>
<p>Make this View as freeform as below.</p>
<img src="../../Images/CustomView/CustomView_6.png" alt="" class="img-responsive" />
<br />
<br />
<img src="../../Images/CustomView/CustomView_7.png" alt="" class="img-responsive" />
<br />
<p>Choose the SampleView class from the class inspector.</p>
<img src="../../Images/CustomView/CustomView_8.png" alt="" class="img-responsive" />
<br /><br />
<p>Add a Control to the UIView and Create an Outlet to that Control. In this example I have used a UITextField.</p>
<img src="../../Images/CustomView/CustomView_9.png" alt="" class="img-responsive" />
<br /><br />
<pre>
<span style='color:#808030; '>[</span>Register <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>)</span><span style='color:#808030; '>]</span>
partial <span style='color:#800000; font-weight:bold; '>class</span> SampleView
<span style='color:#800080; '>{</span>
    <span style='color:#808030; '>[</span>Outlet<span style='color:#808030; '>]</span>
    <span style='color:#800000; font-weight:bold; '>public</span> UIKit<span style='color:#808030; '>.</span>UILabel LblText <span style='color:#800080; '>{</span> <span style='color:#800000; font-weight:bold; '>get</span><span style='color:#800080; '>;</span> <span style='color:#800000; font-weight:bold; '>set</span><span style='color:#800080; '>;</span> <span style='color:#800080; '>}</span>
    <span style='color:#800000; font-weight:bold; '>void</span> ReleaseDesignerOutlets <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
    <span style='color:#800080; '>{</span>
        <span style='color:#800000; font-weight:bold; '>if</span> <span style='color:#808030; '>(</span>LblText <span style='color:#808030; '>!</span><span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>null</span><span style='color:#808030; '>)</span> <span style='color:#800080; '>{</span>
            LblText<span style='color:#808030; '>.</span>Dispose <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
            LblText <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>null</span><span style='color:#800080; '>;</span>
        <span style='color:#800080; '>}</span>
    <span style='color:#800080; '>}</span>
<span style='color:#800080; '>}</span>
</pre>
<p>Open the View Controller and add the view as below.</p>
<pre>
<span style='color:#800000; font-weight:bold; '>public</span> <span style='color:#800000; font-weight:bold; '>override</span> <span style='color:#800000; font-weight:bold; '>void</span> ViewDidLoad <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span>
<span style='color:#800080; '>{</span>
    <span style='color:#800000; font-weight:bold; '>base</span><span style='color:#808030; '>.</span>ViewDidLoad <span style='color:#808030; '>(</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>var</span> views <span style='color:#808030; '>=</span> NSBundle<span style='color:#808030; '>.</span>MainBundle<span style='color:#808030; '>.</span>LoadNib <span style='color:#808030; '>(</span><span style='color:#800000; '>"</span><span style='color:#0000e6; '>SampleView</span><span style='color:#800000; '>"</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>null</span><span style='color:#808030; '>,</span> <span style='color:#800000; font-weight:bold; '>null</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>var</span> contentCell <span style='color:#808030; '>=</span> Runtime<span style='color:#808030; '>.</span>GetNSObject <span style='color:#808030; '>(</span>views<span style='color:#808030; '>.</span>ValueAt <span style='color:#808030; '>(</span><span style='color:#008c00; '>0</span><span style='color:#808030; '>)</span><span style='color:#808030; '>)</span> <span style='color:#800000; font-weight:bold; '>as</span> SampleView<span style='color:#800080; '>;</span> 
    contentCell<span style='color:#808030; '>.</span>Frame <span style='color:#808030; '>=</span> <span style='color:#800000; font-weight:bold; '>new</span> CGRect <span style='color:#808030; '>(</span><span style='color:#008c00; '>10</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>180</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>300</span><span style='color:#808030; '>,</span> <span style='color:#008c00; '>100</span><span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
    contentCell<span style='color:#808030; '>.</span>LblText<span style='color:#808030; '>.</span>Text <span style='color:#808030; '>=</span> <span style='color:#800000; '>"</span><span style='color:#0000e6; '>This is Sample Custom View</span><span style='color:#800000; '>"</span><span style='color:#800080; '>;</span>
    <span style='color:#800000; font-weight:bold; '>this</span><span style='color:#808030; '>.</span>View<span style='color:#808030; '>.</span>Add <span style='color:#808030; '>(</span>contentCell<span style='color:#808030; '>)</span><span style='color:#800080; '>;</span>
<span style='color:#800080; '>}</span>
</pre>​
<br />
<p><b><u>Output:</u></b></p>
<img src="../../Images/CustomView/IMG_2591.jpg" alt="" width="200" height="300" class="img-responsive"/>
<br /><br />
<p>Enjoy Coding..... :)</p>